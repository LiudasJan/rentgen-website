<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>API Story: Cache-Control for Private API â€” preventing â€œghost dataâ€ in caches</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
    content="Rentgen is a secure, local-only API testing tool. No accounts, no tracking, no logging â€“ just deep backend tests that stay on your machine." />
  <link rel="canonical" href="https://rentgen.io/api-stories/uppercase-domain-handling.html" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
  <link rel="icon" type="image/png" href="../assets/rentgen-logo.png" />
  <link rel="apple-touch-icon" href="../assets/rentgen-logo.png" />

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Rentgen â€“ Secure Local API Testing Tool" />
  <meta property="og:description" content="No cloud. No tracking. No logs. Just brutal API testing on your machine." />
  <meta property="og:image" content="https://rentgen.io/assets/og-image.png" />
  <meta property="og:url" content="https://rentgen.io/" />
  <meta property="og:type" content="website" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Rentgen â€“ Secure Local API Testing Tool" />
  <meta name="twitter:description" content="No cloud. No tracking. No logs. Just brutal API testing on your machine." />
  <meta name="twitter:image" content="https://rentgen.io/assets/og-image.png" />

  <link rel="stylesheet" href="../styles.css" />
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="https://rentgen.io/#top" class="brand">
        <img src="../assets/rentgen-logo.png" class="brand-logo" />
        <span class="brand-name">Rentgen</span>
      </a>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span><span></span>
      </button>
      <nav class="site-nav">
        <a href="https://rentgen.io/#features">Features</a>
        <a href="https://rentgen.io/#security">Security</a>
        <a href="https://rentgen.io/#downloads">Downloads</a>
        <a href="https://rentgen.io/#cases">Case studies</a>
        <a href="https://rentgen.io/#github">GitHub</a>
        <a href="https://rentgen.io/api-stories/">API Stories</a>
      </nav>
    </div>
  </header>

  <main class="section">

    <article class="container article">
      <header class="article-header">
        <h1>Uppercase Domain Handling â€” when your API breaks because someone typed â€œLOCALHOSTâ€</h1>
        <p class="article-meta">
          Rentgen API Stories Â· January 2026
        </p>
      </header>

      <div class="article-content">
        <p>
          This is one of those bugs that looks too stupid to exist â€” until you see it in production.
          Someone types a domain in uppercase (<code>API.EXAMPLE.COM</code> or <code>LOCALHOST</code>),
          and the backend responds with <code>500</code>, <code>404</code>, or some other nonsense.
        </p>

        <p>
          The scary part? Itâ€™s rare, so itâ€™s almost never tested. And when it happens, itâ€™s usually discovered
          the worst way possible: by a frustrated developer, in a rushed integration, at midnight.
        </p>

        <h2>What was tested</h2>
        <p>
          Rentgen takes your original request and changes only one thing: the domain casing.
          It turns the host into uppercase and expects the API to behave normally.
        </p>

        <ul>
          <li><strong>TEST:</strong> Uppercase Domain Test</li>
          <li><strong>Mutation:</strong> Host/domain converted to uppercase</li>
          <li><strong>Expected:</strong> Any <code>2xx</code> success (same behavior as normal request)</li>
          <li><strong>Example result:</strong> <strong>ğŸŸ¢ Pass</strong> (<code>200 OK</code>)</li>
          <li><strong>If not 2xx:</strong> Rentgen marks it as a real bug â€” because the server is reacting to casing, not logic</li>
        </ul>

        <figure>
          <img width="100%" src="../assets/api-stories/uppercase-domain-test.png" alt="Uppercase Domain Test in Rentgen" />
          <figcaption>Rentgen mutates the host casing and checks whether the API stays stable</figcaption>
        </figure>

        <h2>Why this matters (even if itâ€™s â€œrareâ€)</h2>
        <p>
          Domain names are effectively case-insensitive in real-world usage, and many layers treat them that way:
          DNS lookups, client libraries, proxies, browsers, and common tooling.
          If your API breaks when the host casing changes, it means somewhere in your stack
          youâ€™re treating the host as case-sensitive text â€” which is a configuration smell.
        </p>

        <p>
          This bug is expensive in the most annoying way: it wastes time.
          Not because itâ€™s hard to fix â€” but because nobody expects it.
          People debug the payload, the auth, the query params, the headersâ€¦
          when the â€œroot causeâ€ is literally a capitalization difference.
        </p>

        <h2>What Rentgen found</h2>
        <p>
          In your run:
        </p>
        <ul>
          <li><strong>Expected:</strong> <code>2xx</code></li>
          <li><strong>Actual:</strong> <code>200 OK</code></li>
          <li><strong>Status:</strong> <strong>ğŸŸ¢ Pass</strong></li>
        </ul>

        <p>
          Good. This is how it should be: the API doesnâ€™t care if the domain is typed as
          <code>api.example.com</code> or <code>API.EXAMPLE.COM</code>.
        </p>

        <h2>Where this fails in real systems</h2>
        <p>
          When it fails, it usually fails because of infrastructure assumptions â€” not application logic.
          Typical culprits:
        </p>
        <ul>
          <li><strong>Reverse proxy / gateway routing rules</strong> that match <code>Host</code> as a case-sensitive string</li>
          <li><strong>Virtual host config</strong> that doesnâ€™t normalize the incoming host</li>
          <li><strong>Custom middleware</strong> that uses the host string directly (as a key, map lookup, or routing switch)</li>
          <li><strong>Local development stacks</strong> where â€œlocalhost handlingâ€ is inconsistent across tools</li>
        </ul>

        <h2>Why localhost is a special trap</h2>
        <p>
          You asked the right question: should this work for <code>LOCALHOST</code>?
          Yes. It should.
        </p>

        <p>
          And ironically, localhost environments are where youâ€™ll see this bug more often.
          Not because localhost is special â€” but because dev setups are full of hand-written configs:
          custom hosts files, local proxies, Docker networks, wildcard routing, and quick fixes that never get hardened.
        </p>

        <p>
          If you build internal tools that run only locally or in a private network,
          this test is not â€œnice-to-haveâ€. Itâ€™s a silent stability check.
          Local bugs have a habit of becoming production bugs later â€” just with better excuses.
        </p>

        <h2>Whatâ€™s the worst that can happen?</h2>
        <p>
          Nothing â€œhacker movieâ€ style. Just real-world pain:
        </p>
        <ul>
          <li><strong>Random 404s</strong> depending on how a client formats the URL</li>
          <li><strong>500 spikes</strong> in local environments that nobody can reproduce consistently</li>
          <li><strong>Support tickets</strong> where the user swears â€œthe endpoint is downâ€ (and theyâ€™re not wrong)</li>
          <li><strong>Broken integrations</strong> where one library normalizes host casing and another doesnâ€™t</li>
        </ul>

        <h2>How to fix it (pragmatic checklist)</h2>
        <p>
          Fixing this is usually not a code rewrite. Itâ€™s configuration discipline:
        </p>
        <ul>
          <li><strong>Normalize</strong> the incoming host (<code>lowercase</code>) at the edge (proxy/gateway) before routing decisions</li>
          <li>Ensure your routing rules donâ€™t depend on case-sensitive host matching</li>
          <li>For local stacks, verify your dev proxy behaves the same way as production</li>
          <li>If you use host-based multi-tenancy, treat host values as identifiers that must be normalized</li>
        </ul>

        <h2>Why I put this into Rentgen</h2>
        <p>
          Because testers rarely check this manually.
          Not because theyâ€™re lazy â€” because it feels pointlessâ€¦ until itâ€™s not.
        </p>

        <p>
          Rentgen does it automatically:
          the test costs almost nothing to run,
          and when it fails, it saves hours of debugging that would otherwise end with:
          â€œWaitâ€¦ you typed it in uppercase?â€
        </p>

        <h2>Final thoughts</h2>
        <p>
          If it passes: perfect â€” move on.
          If it fails: treat it as an infrastructure bug, not a â€œweird client issueâ€.
          Your API shouldnâ€™t behave differently because someone used Caps Lock.
        </p>
      </div>
    </article>


  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <span>Â© <span id="year"></span> Rentgen</span>
      <span class="footer-note">Built for testers, by a tester.</span>
    </div>
  </footer>

  <script src="../script.js"></script>
</body>
</html>
